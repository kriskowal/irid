(function(s){var w,z,A,B,c,t,x,y,C,n,D,E,F,G,o=s.parseFloat,l=s.parseInt,j=s.undefined,m=Math.round,p=Math.max,q=Math.min,r=Math.floor;c=s.Colour=function(a){if(!(this instanceof c))return new c(a);if(!a)throw"Invalid colour specification";if(a instanceof c){this.hsl=a.hsl;this.rgb=a.rgb}else if(a.h!==j&&a.s!==j&&a.l!==j)this.hsl=a;else if(typeof a=="string"){this.rgb=w(a)||D(a)||w(c.swatches[a.toLowerCase()]);if(!this.rgb){this.hsl=E(a);if(!this.hsl)throw"Invalid colour specification";}}else if(a.r!==
j&&a.g!==j&&a.b!==j)this.rgb=a};c.prototype={_makeRGB:function(){if(typeof this.rgb=="undefined")this.rgb=B(this.hsl)},_makeHSL:function(){if(typeof this.hsl=="undefined")this.hsl=A(this.rgb)},luma:function(){var a=this.rgb;this._makeRGB();return(0.3*a.r+0.59*a.g+0.11*a.b)/255},red:function(a){this._makeRGB();return typeof a=="undefined"?this.rgb.r:new c({r:l(a,10),g:this.rgb.g,b:this.rgb.b,a:this.rgb.a})},green:function(a){this._makeRGB();return typeof a=="undefined"?this.rgb.g:new c({r:this.rgb.r,
g:l(a,10),b:this.rgb.b,a:this.rgb.a})},blue:function(a){this._makeRGB();return typeof a=="undefined"?this.rgb.b:new c({r:this.rgb.r,g:this.rgb.g,b:l(a,10),a:this.rgb.a})},hue:function(a){this._makeHSL();return typeof a=="undefined"?this.hsl.h:new c({h:o(a),s:this.hsl.s,l:this.hsl.l,a:this.hsl.a})},saturation:function(a){this._makeHSL();return typeof a=="undefined"?this.hsl.s:new c({h:this.hsl.h,s:o(a),l:this.hsl.l,a:this.hsl.a})},lightness:function(a){this._makeHSL();return typeof a=="undefined"?
this.hsl.l:new c({h:this.hsl.h,s:this.hsl.s,l:o(a),a:this.hsl.a})},alpha:function(a){if(arguments.length===0)return(this.hsl||this.rgb).a;else{a=a===null||a===j?j:o(a);return this.hsl?new c({h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:a}):new c({r:this.rgb.r,g:this.rgb.g,b:this.rgb.b,a:a})}},lighten:function(a){this._makeHSL();return new c({h:this.hsl.h,s:this.hsl.s,l:this.hsl.l+(1-this.hsl.l)*a,a:this.hsl.a})},darken:function(a){this._makeHSL();return new c({h:this.hsl.h,s:this.hsl.s,l:this.hsl.l*(1-
a),a:this.hsl.a})},invert:function(){this._makeRGB();return new c({r:255-this.rgb.r,g:255-this.rgb.g,b:255-this.rgb.b,a:this.rgb.a})},complement:function(){this._makeHSL();return new c({h:(this.hsl.h+0.5)%1,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a})},desaturate:function(){this._makeHSL();return new c({h:this.hsl.h,s:0,l:this.hsl.l,a:this.hsl.a})},contrast:function(a,b){return new c(this.luma()>0.6?b||"#111":a||"#eee")},analagous:function(){return[this,this.hue(this.hue()-1/12),this.hue(this.hue()+1/
12)]},tetrad:function(){var a=this.hue();return[this,this.hue(a+0.25),this.hue(a+0.5),this.hue(a+0.75)]},rectTetrad:function(){return[this,this.hue(this.hue()+1/6),this.hue(this.hue()+0.5),this.hue(this.hue()+4/6)]},triad:function(){return[this,this.hue(this.hue()-1/3),this.hue(this.hue()+1/3)]},splitComplementary:function(){return[this,this.hue(this.hue()-5/12),this.hue(this.hue()+5/12)]},toString:function(){return this.toHexString()},toHexString:function(){this._makeRGB();return z(this.rgb)},toRGBString:function(){this._makeRGB();
return F(this.rgb)},toHSLString:function(){this._makeHSL();return G(this.hsl)}};n=function(a){if(a.length==1)a+=a;return p(0,q(255,l(a,16)))};t=function(a){var b=a.charAt(a.length-1)=="%";if(b)a=a.slice(0,a.length-1);return p(0,q(255,m(l(a,10)*(b?2.55:1))))};x=function(a){return a?p(0,q(1,o(a))):j};C=function(a){a=l(a,10)%360;if(a<0)a+=360;return a/360};y=function(a){return p(0,q(100,l(a,10)))/100};w=c.hexToRGB=function(a){return(a=/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i.exec(a)||/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i.exec(a))?
{r:n(a[1]),g:n(a[2]),b:n(a[3]),a:typeof a[4]=="undefined"||a[4]==""?j:n(a[4])/255}:j};D=c.cssRGBToRGB=function(a){return(a=/^rgba?\(\s*(-?\d+%?)\s*,\s*(-?\d+%?)\s*,\s*(-?\d+%?)\s*(?:,\s*(-?\d*(?:\.\d+)?)?)?\s*\)$/.exec(a))?{r:t(a[1]),g:t(a[2]),b:t(a[3]),a:x(a[4])}:j};F=c.rgbToCSSRGB=function(a){return"rgb"+(a.a?"a":"")+"("+m(a.r)+", "+m(a.g)+", "+m(a.b)+(a.a?", "+a.a.toFixed(2):"")+")"};G=c.hslToCSSHSL=function(a){return"hsl"+(a.a?"a":"")+"("+m(a.h*360)+", "+m(a.s*100)+"%, "+m(a.l*100)+"%"+(a.a?", "+
a.a.toFixed(2):"")+")"};E=c.cssHSLToHSL=function(a){return(a=/^hsla?\(\s*(-?\d+)\s*,\s*(-?\d+%)\s*,\s*(-?\d+%)\s*(?:,\s*(-?\d*(?:\.\d+)?)?)?\s*\)$/.exec(a))?{h:C(a[1]),s:y(a[2]),l:y(a[3]),a:x(a[4])}:j};z=c.rgbToHex=function(a){var b="#"+(a.r<16?"0":"")+a.r.toString(16)+(a.g<16?"0":"")+a.g.toString(16)+(a.b<16?"0":"")+a.b.toString(16);if(a.a!==j){a=r(a.a*255);b+=(a<16?"0":"")+a.toString(16)}return b};A=c.rgbToHSL=function(a){var b,e,f,g,d,h=a.r/255,k=a.g/255,i=a.b/255,u=g=0,v=0;b=p(h,k,i);e=q(h,k,
i);v=(e+b)/2;if(v>0){u=f=b-e;if(u>0){u/=v<=0.5?b+e:2-b-e;g=(b-h)/f;d=(b-k)/f;f=(b-i)/f;g=h==b?k==e?5+f:1-d:k==b?i==e?1+g:3-f:h==e?3+d:5-g;g/=6}}return{h:g%1,s:u,l:v,a:a.a}};B=c.hslToRGB=function(a){var b,e,f,g,d,h,k,i;i=a.h%1;b=a.s;d=a.l;if(i<0)i+=1;e=f=g=d;b=d<=0.5?d*(1+b):d+b-d*b;if(b>0){d=d+d-b;h=(b-d)/b;i*=6;k=r(i);h=b*h*(i-k);i=d+h;h=b-h;switch(k){case 0:e=b;f=i;g=d;break;case 1:e=h;f=b;g=d;break;case 2:e=d;f=b;g=i;break;case 3:e=d;f=h;g=b;break;case 4:e=i;f=d;g=b;break;case 5:e=b;f=d;g=h;break}}return{r:r(e*
255),g:r(f*255),b:r(g*255),a:a.a}};c.swatches={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",
darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",
fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",
lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",
mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}})(this);
